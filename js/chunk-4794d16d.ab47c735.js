(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4794d16d"],{"0ffb":function(e,t,o){"use strict";o.r(t);var r=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("Card",{attrs:{shadow:""}},[o("div",{attrs:{slot:"title"},slot:"title"},[o("h4",[e._v("作者"),e.objShow&&e.objShow.name?o("span",[e._v("——"+e._s(e.objShow.name))]):e._e(),e._v(" 书籍信息管理")])]),o("div",[o("Button",{staticStyle:{"margin-bottom":"10px","margin-right":"5px"},attrs:{type:"success",icon:"md-trash"},on:{click:e.clearOrder}},[e._v("清除排序")]),o("Button",{staticStyle:{"margin-bottom":"10px","margin-right":"5px"},attrs:{type:"success",icon:"md-add"},on:{click:function(t){return e.showItem(-1,!1)}}},[e._v("添加")]),o("Input",{staticStyle:{width:"200px","margin-bottom":"10px"},attrs:{placeholder:"请输入搜索关键词...",clearable:""},on:{"on-blur":e.getPage},model:{value:e.searchKeyword,callback:function(t){e.searchKeyword=t},expression:"searchKeyword"}})],1),o("Table",{ref:"table",attrs:{border:"",size:"large",columns:e.columns,data:e.objList},on:{"on-sort-change":e.sortChange}})],1),o("br"),o("Page",{staticStyle:{"text-align":"center"},attrs:{total:e.page.total,"page-size-opts":e.page.pageSizeOpts,"show-sizer":"","show-elevator":"","show-total":""},on:{"on-change":e.handleCurrentChange,"on-page-size-change":e.handleSizeChange}}),o("div",[o("Modal",{attrs:{title:"删除信息",loading:e.modalDelLoading},on:{"on-ok":e.handleDelete},model:{value:e.modalDel,callback:function(t){e.modalDel=t},expression:"modalDel"}},[o("p",{staticStyle:{"text-align":"center"}},[o("strong",[e._v("您确定要删除该信息吗？")])]),o("div",{attrs:{slot:"footer"},slot:"footer"},[o("Button",{attrs:{type:"error",size:"large",long:"",loading:e.modalDelLoading},on:{click:e.handleDelete}},[e._v("删除")])],1)]),o("Modal",{attrs:{title:"信息查看","ok-text":"确定","mask-closable":!1,"footer-hide":!e.disabled,loading:e.dialogLoading},model:{value:e.dialogVisible,callback:function(t){e.dialogVisible=t},expression:"dialogVisible"}},[o("Item",{attrs:{disabled:e.disabled,authorId:e.objShow.id,objShow:e.objForm},on:{afterSubmit:e.afterSubmit}})],1)],1)],1)},n=[],a=(o("a15b"),o("7c53")),i=o("6d57"),s=o("2117"),c=function(e){return[{type:"index",width:60,align:"center"},{title:"书籍名称",key:"title",minWidth:120,sortable:"custom",align:"center",render:Object(s["a"])("title")},{title:"标签",key:"tags",minWidth:120,sortable:"custom",align:"center",render:Object(s["a"])("tags")},{title:"书籍主页",key:"homepage",minWidth:120,sortable:"custom",align:"center",render:Object(s["a"])("homepage")},{title:"创建时间",key:"ctime",minWidth:100,sortable:"custom",align:"center",render:Object(s["a"])("ctime")},{title:"更新时间",key:"utime",minWidth:120,sortable:"custom",align:"center",render:Object(s["a"])("utime")},{title:"书籍简介",key:"descr",minWidth:150,sortable:"custom",align:"center",render:Object(s["a"])("descr")},{title:"所在平台",key:"bookPlat",minWidth:120,sortable:"custom",align:"center",render:Object(s["a"])("bookPlat")},{title:"操作",key:"操作",fixed:"right",width:250,align:"center",render:function(t,o){return t("div",[t("Button",{props:{type:"success",size:"small"},style:{marginRight:"5px"},on:{click:function(){e.showItem(o.index,!0)}}},[t("Icon",{props:{type:"ios-copy",size:16}}),"查看"]),t("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px"},on:{click:function(){e.showItem(o.index,!1)}}},[t("Icon",{props:{type:"ios-create",size:16}}),"修改"]),t("Button",{props:{type:"warning",size:"small"},on:{click:function(){e.delete(o.index)}}},[t("Icon",{props:{type:"ios-trash",size:16}})," 删除"])])}}]},l=o("afe3"),u={name:"bookPage",props:{objShow:{type:Object,default:function(){return null}}},components:{Item:l["default"]},mixins:[a["a"]],data:function(){return{searchKeyword:""}},computed:{columns:function(){return c(this)}},methods:{getPage:function(){var e=this,t=e.page,o={authorId:e.objShow.id};e.searchKeyword&&(o["title"]=e.searchKeyword);var r=t.descs.join(),n=t.ascs.join(),a=Object.assign({current:t.current,size:t.pageSize,descs:r,ascs:n},o);i["d"](a).then((function(t){e.objList=t.data.data.records,e.page.total=t.data.data.total,e.page.current=t.data.data.current})).catch((function(t){e.$Message.error("获取列表信息失败")}))},handleDelete:function(){var e=this;i["b"](e.objForm["id"]).then((function(t){e.$Message.success("删除成功！"),e.modalDel=!1,e.getPage()})).catch((function(t){e.$Message.error("删除失败，请重试！")}))},initShow:function(){var e=this,t=e.objShow;e.objList=[],t?e.$nextTick((function(){e.getPage()})):this.objForm=null}},watch:{objShow:{handler:function(){this.initShow()},deep:!0,immediate:!0}}},d=u,m=o("2877"),p=Object(m["a"])(d,r,n,!1,null,"28c015d7",null);t["default"]=p.exports},1148:function(e,t,o){"use strict";var r=o("a691"),n=o("1d80");e.exports="".repeat||function(e){var t=String(n(this)),o="",a=r(e);if(a<0||a==1/0)throw RangeError("Wrong number of repetitions");for(;a>0;(a>>>=1)&&(t+=t))1&a&&(o+=t);return o}},2117:function(e,t,o){"use strict";o.d(t,"a",(function(){return r})),o.d(t,"c",(function(){return n})),o.d(t,"b",(function(){return i}));o("c975"),o("b680"),o("4d63"),o("25f0"),o("5319");function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"right";return function(o,r){var n=a(r.row[e]);if(n){var i=String(n).replace(/[^0-9][a-z][A-Z]+/g,""),s=String(n).replace(/[^\u4e00-\u9fa5]+/g,""),c=8*i.length+12*s.length,l=n,u=n;return"string"===typeof u&&-1!==r.row[e].indexOf(" ")&&(l=n.replace(/\s/g,"<span>&nbsp;</span>")),.9*r.column._width<c?o("div",[o("Tooltip",{props:{placement:t},transfer:!0},[o("span",{style:{display:"inline-block",width:.9*r.column._width+"px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},domProps:{innerHTML:l}}),o("span",{slot:"content",style:{whiteSpace:"normal",wordBreak:"break-all"},domProps:{innerHTML:l}})])]):o("div",[o("span",{domProps:{innerHTML:l}})])}}}function n(e){return e.replace(/([A-Z])/g,"_$1").toLowerCase()}function a(e){return e?"string"!==typeof e?e:e.replace(/<[^>]+>/g,""):null}function i(e){return e?e.realname?e.realname:e.alias?e.alias:e.username:null}},"408a":function(e,t,o){var r=o("c6b6");e.exports=function(e){if("number"!=typeof e&&"Number"!=r(e))throw TypeError("Incorrect invocation");return+e}},"4d63":function(e,t,o){var r=o("83ab"),n=o("da84"),a=o("94ca"),i=o("7156"),s=o("9bf2").f,c=o("241c").f,l=o("44e7"),u=o("ad6d"),d=o("6eeb"),m=o("d039"),p=o("2626"),h=o("b622"),f=h("match"),b=n.RegExp,g=b.prototype,j=/a/g,v=/a/g,w=new b(j)!==j,F=r&&a("RegExp",!w||m((function(){return v[f]=!1,b(j)!=j||b(v)==v||"/a/i"!=b(j,"i")})));if(F){var y=function(e,t){var o=this instanceof y,r=l(e),n=void 0===t;return!o&&r&&e.constructor===y&&n?e:i(w?new b(r&&!n?e.source:e,t):b((r=e instanceof y)?e.source:e,r&&n?u.call(e):t),o?this:g,y)},k=function(e){e in y||s(y,e,{configurable:!0,get:function(){return b[e]},set:function(t){b[e]=t}})},S=c(b),I=0;while(S.length>I)k(S[I++]);g.constructor=y,y.prototype=g,d(n,"RegExp",y)}p("RegExp")},"6d57":function(e,t,o){"use strict";o.d(t,"d",(function(){return n})),o.d(t,"c",(function(){return a})),o.d(t,"a",(function(){return i})),o.d(t,"e",(function(){return s})),o.d(t,"b",(function(){return c})),o.d(t,"f",(function(){return l}));var r=o("66df");function n(e){return r["a"].request({url:"/book/page",method:"get",params:e})}function a(e){return r["a"].request({url:"/book/list",method:"get",params:e})}function i(e){return r["a"].request({url:"/book/admin",method:"post",data:e})}function s(e){return r["a"].request({url:"/book/"+e,method:"get"})}function c(e){return r["a"].request({url:"/book/admin/"+e,method:"delete"})}function l(e){return r["a"].request({url:"/book/admin",method:"put",data:e})}},"7c53":function(e,t,o){"use strict";o("c975"),o("a434");var r=o("2117");t["a"]={data:function(){return{page:{pageSizeOpts:[5,10,20,30,40,100],total:0,current:1,pageSize:10,descs:["ctime"],ascs:[]},dialogVisible:!1,dialogLoading:!1,objForm:null,modalDel:!1,modalDelLoading:!1,objList:[],disabled:!1}},methods:{showItem:function(e,t){this.objForm=e>-1?this.objList[e]:null,this.dialogVisible=!0,this.disabled=t},delete:function(e){this.modalDel=!0,this.objForm=this.objList[e]},handleCurrentChange:function(e){this.page.current=e,this.getPage()},handleSizeChange:function(e){this.page.pageSize=e,this.getPage()},afterSubmit:function(){this.dialogVisible=!1,this.getPage()},clearOrder:function(){this.page.descs=[],this.page.ascs=[],this.getPage()},sortChange:function(e){var t=e.order,o=Object(r["c"])(e.key);if("asc"===t){var n=this.page.ascs.indexOf(o);-1!==n&&this.page.ascs.splice(n,1),this.page.ascs.unshift(o),this.page.descs=[]}else if("desc"===t){var a=this.page.descs.indexOf(o);-1!==a&&this.page.descs.splice(a,1),this.page.descs.unshift(o),this.page.ascs=[]}this.getPage()}}}},a15b:function(e,t,o){"use strict";var r=o("23e7"),n=o("44ad"),a=o("fc6a"),i=o("b301"),s=[].join,c=n!=Object,l=i("join",",");r({target:"Array",proto:!0,forced:c||l},{join:function(e){return s.call(a(this),void 0===e?",":e)}})},a9e3:function(e,t,o){"use strict";var r=o("83ab"),n=o("da84"),a=o("94ca"),i=o("6eeb"),s=o("5135"),c=o("c6b6"),l=o("7156"),u=o("c04e"),d=o("d039"),m=o("7c73"),p=o("241c").f,h=o("06cf").f,f=o("9bf2").f,b=o("58a8").trim,g="Number",j=n[g],v=j.prototype,w=c(m(v))==g,F=function(e){var t,o,r,n,a,i,s,c,l=u(e,!1);if("string"==typeof l&&l.length>2)if(l=b(l),t=l.charCodeAt(0),43===t||45===t){if(o=l.charCodeAt(2),88===o||120===o)return NaN}else if(48===t){switch(l.charCodeAt(1)){case 66:case 98:r=2,n=49;break;case 79:case 111:r=8,n=55;break;default:return+l}for(a=l.slice(2),i=a.length,s=0;s<i;s++)if(c=a.charCodeAt(s),c<48||c>n)return NaN;return parseInt(a,r)}return+l};if(a(g,!j(" 0o1")||!j("0b1")||j("+0x1"))){for(var y,k=function(e){var t=arguments.length<1?0:e,o=this;return o instanceof k&&(w?d((function(){v.valueOf.call(o)})):c(o)!=g)?l(new j(F(t)),o,k):F(t)},S=r?p(j):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),I=0;S.length>I;I++)s(j,y=S[I])&&!s(k,y)&&f(k,y,h(j,y));k.prototype=v,v.constructor=k,i(n,g,k)}},afe3:function(e,t,o){"use strict";o.r(t);var r=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("div",[o("Form",{ref:"objForm",attrs:{model:e.objForm,"label-width":120}},[o("FormItem",{attrs:{label:"书籍名称",prop:"title"}},[e.disabled?o("p",[e._v(" "+e._s(e.objForm.title)+" ")]):o("Input",{attrs:{placeholder:"书籍名称..."},model:{value:e.objForm.title,callback:function(t){e.$set(e.objForm,"title",t)},expression:"objForm.title"}})],1),o("FormItem",{attrs:{label:"标签",prop:"tags"}},[e.disabled?o("p",[e._v(" "+e._s(e.objForm.tags)+" ")]):o("Input",{attrs:{placeholder:"标签..."},model:{value:e.objForm.tags,callback:function(t){e.$set(e.objForm,"tags",t)},expression:"objForm.tags"}})],1),o("FormItem",{attrs:{label:"书籍主页",prop:"homepage"}},[e.disabled?o("p",[e._v(" "+e._s(e.objForm.homepage)+" ")]):o("Input",{attrs:{placeholder:"书籍主页..."},model:{value:e.objForm.homepage,callback:function(t){e.$set(e.objForm,"homepage",t)},expression:"objForm.homepage"}})],1),o("FormItem",{attrs:{label:"所在平台",prop:"bookPlat"}},[e.disabled?o("p",[e._v(" "+e._s(e.objForm.bookPlat)+" ")]):o("Input",{attrs:{placeholder:"所在平台..."},model:{value:e.objForm.bookPlat,callback:function(t){e.$set(e.objForm,"bookPlat",t)},expression:"objForm.bookPlat"}})],1),e.objForm.ctime?o("FormItem",{attrs:{label:"创建时间",prop:"ctime"}},[o("p",[e._v(" "+e._s(e.objForm.ctime)+" ")])]):e._e(),e.objForm.utime?o("FormItem",{attrs:{label:"更新时间",prop:"utime"}},[o("p",[e._v(" "+e._s(e.objForm.utime)+" ")])]):e._e(),o("FormItem",{attrs:{label:"书籍简介",prop:"descr"}},[e.disabled?o("p",[e._v(" "+e._s(e.objForm.descr)+" ")]):o("Input",{attrs:{type:"textarea",placeholder:"书籍简介..."},model:{value:e.objForm.descr,callback:function(t){e.$set(e.objForm,"descr",t)},expression:"objForm.descr"}})],1),e.disabled?e._e():o("FormItem",[o("Button",{staticStyle:{"margin-right":"5px"},attrs:{type:"primary"},on:{click:function(t){return e.onSubmit("objForm")}}},[e._v(" 提交 ")]),o("Button",{on:{click:function(t){return e.resetForm("objForm")}}},[e._v("重置")])],1)],1)],1)])},n=[],a=(o("a9e3"),o("6d57")),i=(o("2117"),{id:"",title:"",tags:"",homepage:"",authorId:"",ctime:"",utime:"",descr:"",bookPlat:""}),s={name:"bookItem",props:{disabled:{type:Boolean,default:function(){return!0}},authorId:{type:Number,default:function(){return null}},objShow:{type:Object,default:function(){return JSON.parse(JSON.stringify(i))}}},data:function(){return{objForm:i}},methods:{resetForm:function(e){this.$refs.formName.resetFields()},onSubmit:function(){var e=this,t=this;if(t.disabled)return t.modalShow=!1,!1;t.objForm["id"]?a["f"](t.objForm).then((function(e){t.$Message.success("修改成功！"),t.$emit("afterSubmit")})).catch((function(e){t.$Message.error("修改失败!")})):(t.objForm["authorId"]=t.authorId,a["a"](t.objForm).then((function(e){t.$Message.success("添加成功！"),t.$emit("afterSubmit")})).catch((function(t){e.$Message.error("添加失败!")})))},initShow:function(){var e=this,t=e.objShow;console.log(e.disabled),t&&e.$nextTick((function(){e.objForm=JSON.parse(JSON.stringify(t)),e.objForm.id&&a["e"](e.objForm.id).then((function(t){200===t.data.code&&(e.objForm=t.data.data)}))}))}},watch:{objShow:{handler:function(){this.initShow()},deep:!0,immediate:!0}}},c=s,l=o("2877"),u=Object(l["a"])(c,r,n,!1,null,"4f063458",null);t["default"]=u.exports},b680:function(e,t,o){"use strict";var r=o("23e7"),n=o("a691"),a=o("408a"),i=o("1148"),s=o("d039"),c=1..toFixed,l=Math.floor,u=function(e,t,o){return 0===t?o:t%2===1?u(e,t-1,o*e):u(e*e,t/2,o)},d=function(e){var t=0,o=e;while(o>=4096)t+=12,o/=4096;while(o>=2)t+=1,o/=2;return t},m=c&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!s((function(){c.call({})}));r({target:"Number",proto:!0,forced:m},{toFixed:function(e){var t,o,r,s,c=a(this),m=n(e),p=[0,0,0,0,0,0],h="",f="0",b=function(e,t){var o=-1,r=t;while(++o<6)r+=e*p[o],p[o]=r%1e7,r=l(r/1e7)},g=function(e){var t=6,o=0;while(--t>=0)o+=p[t],p[t]=l(o/e),o=o%e*1e7},j=function(){var e=6,t="";while(--e>=0)if(""!==t||0===e||0!==p[e]){var o=String(p[e]);t=""===t?o:t+i.call("0",7-o.length)+o}return t};if(m<0||m>20)throw RangeError("Incorrect fraction digits");if(c!=c)return"NaN";if(c<=-1e21||c>=1e21)return String(c);if(c<0&&(h="-",c=-c),c>1e-21)if(t=d(c*u(2,69,1))-69,o=t<0?c*u(2,-t,1):c/u(2,t,1),o*=4503599627370496,t=52-t,t>0){b(0,o),r=m;while(r>=7)b(1e7,0),r-=7;b(u(10,r,1),0),r=t-1;while(r>=23)g(1<<23),r-=23;g(1<<r),b(1,1),g(2),f=j()}else b(0,o),b(1<<-t,0),f=j()+i.call("0",m);return m>0?(s=f.length,f=h+(s<=m?"0."+i.call("0",m-s)+f:f.slice(0,s-m)+"."+f.slice(s-m))):f=h+f,f}})}}]);